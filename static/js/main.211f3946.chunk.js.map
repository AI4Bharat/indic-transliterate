{"version":3,"sources":["../../src/util/caret-util.ts","../../src/styles.module.css","../../src/constants/TriggerKeys.ts","../../src/constants/Urls.ts","../../src/util/suggestions-util.ts","../../src/util/getTransliterationLanguages.ts","../../src/index.tsx","../../src/util/touch-util.ts","App.tsx","index.tsx"],"names":["elem","caretPos","selectionStart","focus","setSelectionRange","word","config","showCurrentWordAsLastSuggestion","numOptions","lang","requestOptions","method","fetch","replace","encodeURIComponent","res","json","data","result","length","found","console","error","sessionStorage","getItem","JSON","parse","apiURL","Headers","append","setItem","stringify","renderComponent","props","offsetX","offsetY","onChange","onChangeText","onBlur","value","onKeyDown","containerClassName","containerStyles","activeItemStyles","maxOptions","hideSuggestionBoxOnMobileDevices","hideSuggestionBoxBreakpoint","triggerKeys","insertCurrentSelectionOnBlur","enabled","rest","options","setOptions","left","setLeft","top","setTop","selection","setSelection","matchStart","setMatchStart","matchEnd","setMatchEnd","inputRef","width","height","windowSize","setWindowSize","direction","setDirection","googleFont","setGoogleFont","shouldRenderSuggestions","reset","handleSelection","index","triggerKey","currentString","newValue","substring","setTimeout","current","e","target","renderSuggestions","lastWord","getDirectionAndFont","langList","langObj","find","l","LangCode","Direction","GoogleFont","FallbackFont","handleResize","window","innerWidth","innerHeight","addEventListener","removeEventListener","then","fallbackFont","document","getElementById","link","createElement","id","href","rel","head","appendChild","style","position","className","currentTarget","el","caret","selectionEnd","start","end","input","indexOfLastSpace","lastIndexOf","currentWord","slice","rect","getBoundingClientRect","Math","min","event","includes","key","preventDefault","navigator","maxTouchPoints","msMaxTouchPoints","ref","fontFamily","ReactTransliterate","Array","from","Set","map","item","Active","undefined","onMouseEnter","onClick","App","useState","text","setText","languages","setLanguages","setLang","useEffect","getTransliterationLanguages","langs","DisplayName","htmlFor","placeholder","Input","fullWidth","ReactDOM","render"],"mappings":"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","file":"static/js/main.211f3946.chunk.js","sourcesContent":["export function getInputSelection(el: HTMLInputElement) {\n  const start = 0;\n  const end = 0;\n\n  if (!el) {\n    return { start, end };\n  }\n\n  if (\n    typeof el.selectionStart === \"number\" &&\n    typeof el.selectionEnd === \"number\"\n  ) {\n    return { start: el.selectionStart, end: el.selectionEnd };\n  }\n\n  return { start, end };\n}\n\nexport function setCaretPosition(elem: HTMLInputElement, caretPos: number) {\n  if (elem) {\n    if (elem.selectionStart) {\n      elem.focus();\n      elem.setSelectionRange(caretPos, caretPos);\n    } else {\n      elem.focus();\n    }\n  }\n}\n",null,"export const TriggerKeys = {\n  KEY_RETURN: \"Enter\",\n  KEY_ENTER: \"Enter\",\n  KEY_TAB: \"Tab\",\n  KEY_SPACE: \" \",\n};\n","export const BASE_URL = \"https://xlit-api.ai4bharat.org/\";\n","import { Language } from \"../types/Language\";\nimport { BASE_URL } from \"../constants/Urls\";\n\ntype Config = {\n  numOptions?: number;\n  showCurrentWordAsLastSuggestion?: boolean;\n  lang?: Language;\n};\n\nexport const getTransliterateSuggestions = async (\n  word: string,\n  config?: Config,\n): Promise<string[] | undefined> => {\n  const { showCurrentWordAsLastSuggestion, lang } = config || {\n    numOptions: 5,\n    showCurrentWordAsLastSuggestion: true,\n    lang: \"hi\",\n  };\n  // fetch suggestion from api\n  // const url = `https://www.google.com/inputtools/request?ime=transliteration_en_${lang}&num=5&cp=0&cs=0&ie=utf-8&oe=utf-8&app=jsapi&text=${word}`;\n  // let myHeaders = new Headers();\n  // myHeaders.append(\"Content-Type\", \"application/json\");\n\n  const requestOptions = {\n    method: \"GET\",\n  };\n\n  try {\n    const res = await fetch(\n      BASE_URL +\n        `tl/${lang}/${\n          word === \".\" || word === \"..\"\n            ? \" \" + word.replace(\".\", \"%2E\")\n            : encodeURIComponent(word).replace(\".\", \"%2E\")\n        }`,\n      requestOptions,\n    );\n    const data = await res.json();\n    // console.log(\"library data\", data);\n    if (data && data.result.length > 0) {\n      const found = showCurrentWordAsLastSuggestion\n        ? [...data.result, word]\n        : data.result;\n      return found;\n    } else {\n      if (showCurrentWordAsLastSuggestion) {\n        return [word];\n      }\n      return [];\n    }\n  } catch (e) {\n    // catch error\n    console.error(\"There was an error with transliteration\", e);\n    return [];\n  }\n};\n","import { LangObject } from \"../types/LangObject\";\nimport { BASE_URL } from \"../constants/Urls\";\n\nexport const getTransliterationLanguages = async (): Promise<\n  LangObject[] | undefined\n> => {\n  if (sessionStorage.getItem(\"indic_transliterate__supported_languages\")) {\n    return JSON.parse(\n      sessionStorage.getItem(\"indic_transliterate__supported_languages\") || \"\",\n    );\n  } else {\n    const apiURL = `${BASE_URL}languages`;\n    const myHeaders = new Headers();\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n    const requestOptions = {\n      method: \"GET\",\n    };\n    try {\n      const res = await fetch(apiURL, requestOptions);\n      const data = await res.json();\n      sessionStorage.setItem(\n        \"indic_transliterate__supported_languages\",\n        JSON.stringify(data),\n      );\n      return data;\n    } catch (e) {\n      console.error(\"There was an error with transliteration\", e);\n      return [];\n    }\n  }\n};\n","import * as React from \"react\";\nimport { useEffect, useRef, useState, useMemo } from \"react\";\nimport { setCaretPosition, getInputSelection, isTouchEnabled } from \"./util\";\nimport getCaretCoordinates from \"textarea-caret\";\nimport classes from \"./styles.module.css\";\nimport { IndicTransliterateProps } from \"./interfaces/Props\";\nimport { Language } from \"./types/Language\";\nimport { LangObject } from \"./types/LangObject\";\nimport { TriggerKeys } from \"./constants/TriggerKeys\";\nimport { getTransliterateSuggestions } from \"./util/suggestions-util\";\nimport { getTransliterationLanguages } from \"./util/getTransliterationLanguages\";\n\nconst KEY_UP = \"ArrowUp\";\nconst KEY_DOWN = \"ArrowDown\";\nconst KEY_ESCAPE = \"Escape\";\n\nconst OPTION_LIST_Y_OFFSET = 10;\nconst OPTION_LIST_MIN_WIDTH = 100;\n\nexport const IndicTransliterate = ({\n  renderComponent = (props) => <input {...props} />,\n  lang = \"hi\",\n  offsetX = 0,\n  offsetY = 10,\n  onChange,\n  onChangeText,\n  onBlur,\n  value,\n  onKeyDown,\n  containerClassName = \"\",\n  containerStyles = {},\n  activeItemStyles = {},\n  maxOptions = 5,\n  hideSuggestionBoxOnMobileDevices = false,\n  hideSuggestionBoxBreakpoint = 450,\n  triggerKeys = [\n    TriggerKeys.KEY_SPACE,\n    TriggerKeys.KEY_ENTER,\n    TriggerKeys.KEY_RETURN,\n    TriggerKeys.KEY_TAB,\n  ],\n  insertCurrentSelectionOnBlur = true,\n  showCurrentWordAsLastSuggestion = true,\n  enabled = true,\n  ...rest\n}: IndicTransliterateProps): JSX.Element => {\n  const [options, setOptions] = useState<string[]>([]);\n  const [left, setLeft] = useState(0);\n  const [top, setTop] = useState(0);\n  const [selection, setSelection] = useState<number>(0);\n  const [matchStart, setMatchStart] = useState(-1);\n  const [matchEnd, setMatchEnd] = useState(-1);\n  const inputRef = useRef<HTMLInputElement>(null);\n  const [windowSize, setWindowSize] = useState({ width: 0, height: 0 });\n  const [direction, setDirection] = useState(\"ltr\");\n  const [googleFont, setGoogleFont] = useState<string | null>(null);\n\n  const shouldRenderSuggestions = useMemo(\n    () =>\n      hideSuggestionBoxOnMobileDevices\n        ? windowSize.width > hideSuggestionBoxBreakpoint\n        : true,\n    [windowSize, hideSuggestionBoxBreakpoint, hideSuggestionBoxOnMobileDevices],\n  );\n\n  const reset = () => {\n    // reset the component\n    setSelection(0);\n    setOptions([]);\n  };\n\n  const handleSelection = (index: number, triggerKey = \" \") => {\n    const currentString = value;\n    // create a new string with the currently typed word\n    // replaced with the word in transliterated language\n    const newValue =\n      currentString.substring(0, matchStart) +\n      options[index] +\n      \" \" +\n      currentString.substring(matchEnd + 1, currentString.length);\n\n    // set the position of the caret (cursor) one character after the\n    // the position of the new word\n    setTimeout(() => {\n      setCaretPosition(\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        inputRef.current!,\n        triggerKey === \"Enter\"\n          ? matchStart + options[index].length\n          : matchStart + options[index].length + 1,\n      );\n    }, 1);\n\n    // bubble up event to the parent component\n    const e = {\n      target: { value: newValue },\n    } as unknown as React.FormEvent<HTMLInputElement>;\n    onChangeText(newValue);\n    onChange && onChange(e);\n    reset();\n    return inputRef.current?.focus();\n  };\n\n  const renderSuggestions = async (lastWord: string) => {\n    if (!shouldRenderSuggestions) {\n      return;\n    }\n    // fetch suggestion from api\n    // const url = `https://www.google.com/inputtools/request?ime=transliteration_en_${lang}&num=5&cp=0&cs=0&ie=utf-8&oe=utf-8&app=jsapi&text=${lastWord}`;\n\n    const numOptions = showCurrentWordAsLastSuggestion\n      ? maxOptions - 1\n      : maxOptions;\n\n    const data = await getTransliterateSuggestions(lastWord, {\n      numOptions,\n      showCurrentWordAsLastSuggestion,\n      lang,\n    });\n    setOptions(data ?? []);\n  };\n\n  const getDirectionAndFont = async (lang: Language) => {\n    const langList = await getTransliterationLanguages();\n    const langObj = langList?.find((l) => l.LangCode === lang) as LangObject;\n    return [\n      langObj?.Direction ?? \"ltr\",\n      langObj?.GoogleFont,\n      langObj?.FallbackFont,\n    ];\n  };\n\n  const handleChange = (e: React.FormEvent<HTMLInputElement>) => {\n    const value = e.currentTarget.value;\n\n    // bubble up event to the parent component\n    onChange && onChange(e);\n    onChangeText(value);\n\n    if (!shouldRenderSuggestions) {\n      return;\n    }\n\n    // get the current index of the cursor\n    const caret = getInputSelection(e.target as HTMLInputElement).end;\n    const input = inputRef.current;\n\n    if (!input) return;\n\n    const caretPos = getCaretCoordinates(input, caret);\n\n    // search for the last occurence of the space character from\n    // the cursor\n    const indexOfLastSpace =\n      value.lastIndexOf(\" \", caret - 1) < value.lastIndexOf(\"\\n\", caret - 1)\n        ? value.lastIndexOf(\"\\n\", caret - 1)\n        : value.lastIndexOf(\" \", caret - 1);\n\n    // first character of the currently being typed word is\n    // one character after the space character\n    // index of last character is one before the current position\n    // of the caret\n    setMatchStart(indexOfLastSpace + 1);\n    setMatchEnd(caret - 1);\n\n    // currentWord is the word that is being typed\n    const currentWord = value.slice(indexOfLastSpace + 1, caret);\n    if (currentWord && enabled) {\n      // make an api call to fetch suggestions\n      renderSuggestions(currentWord);\n\n      const rect = input.getBoundingClientRect();\n\n      // calculate new left and top of the suggestion list\n\n      // minimum of the caret position in the text input and the\n      // width of the text input\n      const left = Math.min(\n        caretPos.left,\n        rect.width - OPTION_LIST_MIN_WIDTH / 2,\n      );\n\n      // minimum of the caret position from the top of the input\n      // and the height of the input\n      const top = Math.min(caretPos.top + OPTION_LIST_Y_OFFSET, rect.height);\n\n      setTop(top);\n      setLeft(left);\n    } else {\n      reset();\n    }\n  };\n\n  const handleKeyDown = (event: React.KeyboardEvent<HTMLInputElement>) => {\n    const helperVisible = options.length > 0;\n\n    if (helperVisible) {\n      if (triggerKeys.includes(event.key)) {\n        event.preventDefault();\n        handleSelection(selection, event.key);\n      } else {\n        switch (event.key) {\n          case KEY_ESCAPE:\n            event.preventDefault();\n            reset();\n            break;\n          case KEY_UP:\n            event.preventDefault();\n            setSelection((options.length + selection - 1) % options.length);\n            break;\n          case KEY_DOWN:\n            event.preventDefault();\n            setSelection((selection + 1) % options.length);\n            break;\n          default:\n            onKeyDown && onKeyDown(event);\n            break;\n        }\n      }\n    } else {\n      onKeyDown && onKeyDown(event);\n    }\n  };\n\n  const handleBlur = (\n    event: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>,\n  ) => {\n    if (!isTouchEnabled()) {\n      if (insertCurrentSelectionOnBlur && options[selection]) {\n        handleSelection(selection);\n      } else {\n        reset();\n      }\n    }\n    onBlur && onBlur(event);\n  };\n\n  const handleResize = () => {\n    // TODO implement the resize function to resize\n    // the helper on screen size change\n    const width = window.innerWidth;\n    const height = window.innerHeight;\n    setWindowSize({ width, height });\n  };\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", handleResize);\n    const width = window.innerWidth;\n    const height = window.innerHeight;\n    setWindowSize({ width, height });\n\n    return () => {\n      window.removeEventListener(\"resize\", handleResize);\n    };\n  }, []);\n\n  useEffect(() => {\n    getDirectionAndFont(lang).then(([direction, googleFont, fallbackFont]) => {\n      setDirection(direction);\n      // import google font if not already imported\n      if (googleFont) {\n        if (!document.getElementById(`font-${googleFont}`)) {\n          const link = document.createElement(\"link\");\n          link.id = `font-${googleFont}`;\n          link.href = `https://fonts.googleapis.com/css?family=${googleFont}`;\n          link.rel = \"stylesheet\";\n          document.head.appendChild(link);\n        }\n        setGoogleFont(`${googleFont}, ${fallbackFont ?? \"sans-serif\"}`);\n      } else {\n        setGoogleFont(null);\n      }\n    });\n  }, [lang]);\n\n  return (\n    <div\n      // position relative is required to show the component\n      // in the correct position\n      style={{\n        ...containerStyles,\n        position: \"relative\",\n      }}\n      className={containerClassName}\n    >\n      {renderComponent({\n        onChange: handleChange,\n        onKeyDown: handleKeyDown,\n        onBlur: handleBlur,\n        ref: inputRef,\n        value: value,\n        \"data-testid\": \"rt-input-component\",\n        lang: lang,\n        style: {\n          direction: direction,\n          ...(googleFont && { fontFamily: googleFont }),\n        },\n        ...rest,\n      })}\n      {shouldRenderSuggestions && options.length > 0 && (\n        <ul\n          style={{\n            left: `${left + offsetX}px`,\n            top: `${top + offsetY}px`,\n            position: \"absolute\",\n            width: \"auto\",\n            ...(googleFont && { fontFamily: googleFont }),\n          }}\n          className={classes.ReactTransliterate}\n          data-testid=\"rt-suggestions-list\"\n          lang={lang}\n        >\n          {/*\n           * convert to set and back to prevent duplicate list items\n           * that might happen while using backspace\n           */}\n          {Array.from(new Set(options)).map((item, index) => (\n            <li\n              className={index === selection ? classes.Active : undefined}\n              style={index === selection ? activeItemStyles || {} : {}}\n              onMouseEnter={() => {\n                setSelection(index);\n              }}\n              onClick={() => handleSelection(index)}\n              key={item}\n            >\n              {item}\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n};\n\nexport type { IndicTransliterateProps, Language };\nexport { TriggerKeys, getTransliterateSuggestions };\nexport { getTransliterationLanguages };\n","export function isTouchEnabled() {\n  return (\n    \"ontouchstart\" in window ||\n    navigator.maxTouchPoints > 0 ||\n    navigator.msMaxTouchPoints > 0\n  );\n}\n","import React, { useState, useEffect } from \"react\";\n\n// import component\nimport { IndicTransliterate, getTransliterationLanguages } from \"@ai4bharat/indic-transliterate\";\nimport \"@ai4bharat/indic-transliterate/dist/index.css\";\n\n// Material Ui input component\nimport Input from \"@material-ui/core/Input\";\nimport { LangObject } from \"../../dist/types\";\n\nconst App = () => {\n  const [text, setText] = useState(\"\");\n  const [languages, setLanguages] = useState<LangObject[]|undefined>();\n  const [lang, setLang] = useState(\"hi\");\n\n  useEffect(() => {\n    getTransliterationLanguages().then(langs => setLanguages(langs));\n  }, [])\n\n  return (\n    <div className=\"container\">\n      <h2>Indic transliterate</h2>\n\n      <select\n        className=\"language-dropdown\"\n        value={lang}\n        onChange={(e) => setLang(e.target.value)}\n      >\n        {languages?.map((l) => (\n          <option key={l.LangCode} value={l.LangCode}>\n            {l.DisplayName}\n          </option>\n        ))}\n      </select>\n\n      <div className=\"spacer\" />\n\n      <label htmlFor=\"react-transliterate-input\">Using input</label>\n      <IndicTransliterate\n        value={text}\n        onChangeText={(text) => {\n          setText(text);\n        }}\n        lang={lang}\n        placeholder=\"Start typing here...\"\n        id=\"react-transliterate-input\"\n      />\n\n      <div className=\"spacer\" />\n\n      <label htmlFor=\"react-transliterate-textarea\">Using textarea</label>\n      <IndicTransliterate\n        renderComponent={(props) => <textarea {...props} />}\n        value={text}\n        onChangeText={(text) => {\n          setText(text);\n        }}\n        lang={lang}\n        placeholder=\"Start typing here...\"\n        id=\"react-transliterate-textarea\"\n      />\n\n      <div className=\"spacer\" />\n\n      <label htmlFor=\"react-transliterate-material-ui-input\">\n        Using Material UI input\n      </label>\n      <IndicTransliterate\n        renderComponent={(props) => {\n          const inputRef = props.ref;\n\n          delete props.ref;\n\n          return <Input fullWidth {...props} inputRef={inputRef} />;\n        }}\n        value={text}\n        onChangeText={(text) => {\n          setText(text);\n        }}\n        lang={lang}\n        placeholder=\"Start typing here...\"\n        id=\"react-transliterate-material-ui-input\"\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}